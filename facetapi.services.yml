services:
  plugin.manager.facetapi.query_type:
    class: Drupal\facetapi\QueryType\QueryTypePluginManager
    parent: default_plugin_manager
  plugin.manager.facetapi.widget:
    class: Drupal\facetapi\Widget\WidgetPluginManager
    parent: default_plugin_manager
  plugin.manager.facetapi.facet_source:
    class: Drupal\facetapi\FacetSource\FacetSourcePluginManager
    parent: default_plugin_manager
  plugin.manager.facetapi.processor:
    class: Drupal\facetapi\Processor\ProcessorPluginManager
    arguments: ['@container.namespaces', '@cache.discovery', '@module_handler', '@string_translation']
  plugin.manager.facetapi.empty_behavior:
    class: Drupal\facetapi\EmptyBehavior\EmptyBehaviorPluginManager
    parent: default_plugin_manager
  facetapi.manager:
    class: Drupal\facetapi\FacetManager\DefaultFacetManager
    arguments:
      - '@plugin.manager.facetapi.query_type'
      - '@plugin.manager.facetapi.widget'
      - '@plugin.manager.facetapi.facet_source'
      - '@plugin.manager.facetapi.processor'
      - '@plugin.manager.facetapi.empty_behavior'
      - '@entity_type.manager'
      - '@request_stack'

  facetapi.facet_context:
    class: Drupal\facetapi\ContextProvider\FacetContextProvider
    arguments: ['@entity_type.manager']
    tags:
      - { name: context_provider }
  facetapi.config_factory_override:
    class: Drupal\facetapi\Config\FacetSourceConfigFactoryOverride
    arguments: ['@config.storage', '@event_dispatcher', '@config.typed', '@plugin.manager.facetapi.facet_source']
    tags:
      - { name: config.factory.override, priority: -200 }
      - { name: event_subscriber }
